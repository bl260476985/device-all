{"version":3,"sources":["webpack:///./src/app/components/rights-add/rights-add.component.css","webpack:///./src/app/components/rights-add/rights-add.component.html","webpack:///./src/app/components/rights-add/rights-add.component.ts","webpack:///./src/app/modules/rights/rights.module.ts","webpack:///./src/app/services/rights.service.ts"],"names":[],"mappings":"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","file":"modules-rights-rights-module.js","sourcesContent":["module.exports = \".page{\\r\\n    display: flex;\\r\\n    justify-content: center;\\r\\n    /*align-items: center;*/\\r\\n}\"","module.exports = \"<div class=\\\"page\\\">\\n    <div nz-row style=\\\"margin-top: 10%;\\\">\\n        <div nz-col nzSm=\\\"24\\\" class=\\\"add-form\\\">\\n            <label nz-col nzLg=\\\"8\\\" nzXL=\\\"4\\\" class=\\\"text-right add-label\\\">权限级别</label>\\n            <div nz-col nz-col nzLg=\\\"12\\\" nzXl=\\\"12\\\">\\n                <nz-select style=\\\"width: 100%;\\\" [(ngModel)]=\\\"info.level\\\" (ngModelChange)=\\\"levelChange($event)\\\">\\n                    <nz-option nzValue=\\\"1\\\" nzLabel=\\\"一级\\\"></nz-option>\\n                    <nz-option nzValue=\\\"2\\\" nzLabel=\\\"二级\\\"></nz-option>\\n                    <nz-option nzValue=\\\"3\\\" nzLabel=\\\"三级\\\"></nz-option>\\n                    <nz-option nzValue=\\\"4\\\" nzLabel=\\\"四级\\\"></nz-option>\\n                </nz-select>\\n            </div>\\n        </div>\\n        <div nz-col nzSm=\\\"24\\\" class=\\\"add-form\\\" *ngIf=\\\"info.level != '1'\\\">\\n            <label nz-col nzLg=\\\"8\\\" nzXL=\\\"4\\\" class=\\\"text-right add-label\\\">上级权限</label>\\n            <div nz-col nz-col nzLg=\\\"12\\\" nzXl=\\\"12\\\">\\n                <nz-select style=\\\"width: 100%;\\\" [(ngModel)]=\\\"info.parent_id\\\">\\n                    <nz-option *ngFor=\\\"let item of parent_list\\\" [nzValue]=\\\"item.id\\\" [nzLabel]=\\\"item.name\\\"></nz-option>\\n                </nz-select>\\n            </div>\\n        </div>\\n        <div nz-col nzSm=\\\"24\\\" class=\\\"add-form\\\">\\n            <label nz-col nzLg=\\\"8\\\" nzXL=\\\"4\\\" class=\\\"text-right add-label\\\">权限类型</label>\\n            <div nz-col nz-col nzLg=\\\"12\\\" nzXl=\\\"12\\\">\\n                <nz-select style=\\\"width: 100%;\\\" [(ngModel)]=\\\"info.module_type\\\">\\n                    <nz-option nzValue=\\\"1\\\" nzLabel=\\\"菜单\\\" *ngIf=\\\"info.level != '4'\\\"></nz-option>\\n                    <nz-option nzValue=\\\"2\\\" nzLabel=\\\"按钮\\\" *ngIf=\\\"info.level == '4'\\\"></nz-option>\\n                </nz-select>\\n            </div>\\n        </div>\\n        <div nz-col nzSm=\\\"24\\\" class=\\\"add-form\\\">\\n            <label nz-col nzLg=\\\"8\\\" nzXL=\\\"4\\\" class=\\\"text-right add-label\\\">权限计费参数</label>\\n            <div nz-col nz-col nzLg=\\\"12\\\" nzXl=\\\"12\\\">\\n                <nz-select style=\\\"width: 100%;\\\" [(ngModel)]=\\\"info.purchase_type\\\">\\n                    <nz-option nzValue=\\\"0\\\" nzLabel=\\\"全部\\\"></nz-option>\\n                    <nz-option nzValue=\\\"1\\\" nzLabel=\\\"免费\\\"></nz-option>\\n                    <nz-option nzValue=\\\"2\\\" nzLabel=\\\"收费\\\"></nz-option>\\n                    <nz-option nzValue=\\\"3\\\" nzLabel=\\\"试用\\\"></nz-option>\\n                </nz-select>\\n            </div>\\n        </div>\\n        <div nz-col nzSm=\\\"24\\\" class=\\\"add-form\\\">\\n            <label nz-col nzLg=\\\"8\\\" nzXL=\\\"4\\\" class=\\\"text-right add-label\\\">权限名称</label>\\n            <div nz-col nz-col nzLg=\\\"12\\\" nzXl=\\\"12\\\">\\n                <input type=\\\"text\\\" nz-input [(ngModel)]=\\\"info.name\\\" style=\\\"width: 100%;\\\" placeholder=\\\"请输入权限名称\\\">\\n            </div>\\n        </div>\\n        <div nz-col nzSm=\\\"24\\\" class=\\\"add-form\\\">\\n            <label nz-col nzLg=\\\"8\\\" nzXL=\\\"4\\\" class=\\\"text-right add-label\\\">权限标识</label>\\n            <div nz-col nz-col nzLg=\\\"12\\\" nzXl=\\\"12\\\">\\n                <input type=\\\"text\\\" nz-input [(ngModel)]=\\\"info.key\\\" placeholder=\\\"请输入权限标识\\\">\\n            </div>\\n        </div>\\n        <div nz-col nzSm=\\\"24\\\" class=\\\"text-center add-form\\\">\\n            <button nz-button nzType=\\\"default\\\" [routerLink]=\\\"['/index']\\\">取消</button>\\n            <button nz-button nzType=\\\"primary\\\" style=\\\"margin-left:15px;\\\" (click)=\\\"confirm()\\\">确认</button>\\n        </div>\\n    </div>\\n</div>\\n\"","import { Component, OnInit } from '@angular/core';\nimport { RightsService } from '../../services/rights.service';\nimport { DictService } from '../../services/dict.service';\nimport { NzMessageService } from 'ng-zorro-antd';\n\n@Component({\n  selector: 'app-rights-add',\n  templateUrl: './rights-add.component.html',\n  styleUrls: ['./rights-add.component.css']\n})\nexport class RightsAddComponent implements OnInit {\n  info = {\n      level:'',\n      purchase_type:'1',\n      module_type:'',\n      name:'',\n      key:'',\n      parent_id:''\n  }\n  parent_list = [];\n  constructor(private rightService: RightsService,\n              private message: NzMessageService,\n              private dictService: DictService) { }\n\n  ngOnInit() {\n      this.RightsFrommat()\n  }\n  confirm(){\n      if(this.info.level == ''){\n          this.message.warning('请选择权限级别')\n          return false;\n      }\n      if(this.info.level != '1' && this.info.parent_id == ''){\n          this.message.warning('请选择上级权限')\n          return false;\n      }\n      if(this.info.module_type == ''){\n          this.message.warning('请选择权限类型')\n          return false;\n      }\n      if(this.info.purchase_type == '0'){\n          this.message.warning('请选择计费参数')\n          return false\n      }\n      if(this.info.name == ''){\n          this.message.warning('请输入权限名称')\n          return false;\n      }\n      if(this.info.key == ''){\n          this.message.warning('请输入权限标识')\n          return false\n      }\n      const condition = {\n          name:this.info.name,\n          key:this.info.key,\n          purchase_type:this.info.purchase_type,\n          module_type:this.info.module_type,\n          parent_id:this.info.parent_id,\n          level:this.info.level\n      }\n      console.log(condition)\n      this.rightService.add(condition).subscribe((res)=>{\n          if(res['code']==0){\n              this.message.success('添加成功')\n              this.info = {\n                  level:'',\n                  purchase_type:'1',\n                  module_type:'',\n                  name:'',\n                  key:'',\n                  parent_id:''\n              }\n              this.RightsFrommat()\n          }\n      })\n  }\n  levelChange($event){\n      switch ($event) {\n          case \"2\":\n              this.parent_list = this.level_one\n              break;\n          case \"3\":\n              this.parent_list = this.level_two\n              break;\n          case \"4\":\n              this.parent_list = this.level_two\n              break;\n      }\n  }\n   level_one;\n   level_two;\n   level_three;\n   level_four;\n   // 重新封装权限\n   RightsFrommat() {\n       this.level_one = [];\n       this.level_two = [];\n       this.level_three = [];\n       this.level_four = [];\n       const condition = {\n          type:'system_modules_new'\n      }\n      this.dictService.search(condition).subscribe((res)=>{\n          const rights = res['data']\n          for(var i in rights){\n              switch (rights[i].level) {\n                  case \"1\":\n                      this.level_one.push(rights[i])\n                      break;\n                  case \"2\":\n                      this.level_two.push(rights[i])\n                      break;\n                  case \"3\":\n                      this.level_three.push(rights[i])\n                      break;\n                  case \"4\":\n                      this.level_four.push(rights[i])\n              }\n          }\n      }) \n   }\n\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { MycommonModule } from '../../modules/mycommon/mycommon.module';\nimport { RouterModule, Routes } from '@angular/router';\nimport { RightsAddComponent } from '../../components/rights-add/rights-add.component';\n\nconst routes: Routes = [\n    { path: 'add', component: RightsAddComponent}\n]\n\n@NgModule({\n  imports: [\n    CommonModule,\n    MycommonModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [\n      RightsAddComponent\n   ]\n})\nexport class RightsModule { }\n","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { API } from '../../global';\n@Injectable({\n  providedIn: 'root'\n})\nexport class RightsService {\n\n  constructor(private http: HttpClient) { }\n  // 后台添加权限模块入口\n  add(condition){\n      return this.http.post( API + '/system/purchased/add', {content: JSON.stringify(condition)})\n  }\n}\n"],"sourceRoot":""}